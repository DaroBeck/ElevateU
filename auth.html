<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sign in | ElevateU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./auth.css" />
</head>

<body>
  <main class="auth-wrap">
    <!-- Small brand pill -->
    <a class="auth-brand" href="./index.html" aria-label="Back to home">
      <img src="./assets/elevateu-logo.png" alt="ElevateU logo" />
      <span>ElevateU</span>
    </a>

    <section class="auth-card" role="region" aria-label="Authentication">
      <!-- Tabs -->
      <div class="auth-tabs" role="tablist" aria-label="Auth mode">
        <button class="auth-tab" id="tab-signin" type="button" role="tab" aria-selected="true">Sign in</button>
        <button class="auth-tab" id="tab-signup" type="button" role="tab" aria-selected="false">Sign up</button>
      </div>

      <!-- Title -->
      <h1 class="auth-title" id="authTitle">Welcome back</h1>
      <p class="auth-subtitle" id="authSubtitle">Sign in using email/password or a provider.</p>

      <!-- Providers -->
      <div class="auth-providers">
        <button class="auth-provider" type="button" data-provider="google">Continue with Google</button>
        <button class="auth-provider" type="button" data-provider="github">Continue with GitHub</button>
        <button class="auth-provider" type="button" data-provider="apple">Continue with Apple</button>
        <button class="auth-provider" type="button" data-provider="discord">Continue with Discord</button>
      </div>

      <div class="auth-or"><span>OR</span></div>

      <!-- Email form -->
      <form class="auth-form" id="authForm">
        <label class="auth-label" for="email">Email</label>
        <input class="auth-input" id="email" name="email" type="email" placeholder="you@example.com" required />

        <label class="auth-label" for="password">Password</label>
        <div class="auth-password-row">
          <input class="auth-input" id="password" name="password" type="password" placeholder="Enter your password" required />
          <button class="auth-eye" type="button" aria-label="Toggle password visibility">üëÅ</button>
        </div>

        <!-- Confirm password only shown in signup mode -->
        <div id="confirmWrap" style="display:none;">
          <label class="auth-label" for="confirm">Confirm password</label>
          <div class="auth-password-row">
            <input class="auth-input" id="confirm" name="confirm" type="password" placeholder="Repeat your password" />
            <button class="auth-eye" type="button" aria-label="Toggle confirm password visibility">üëÅ</button>
          </div>
        </div>

        <label class="auth-check">
          <input type="checkbox" id="terms" />
          <span>I agree to the Terms and Privacy Policy</span>
        </label>

        <button class="auth-submit" type="submit" id="submitBtn">Sign in</button>

        <div class="auth-foot" id="authFoot">
          New here? Use Sign up.
        </div>
      </form>
    </section>

    <footer class="auth-footer">¬© <span id="year"></span> ElevateU</footer>
  </main>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const params = new URLSearchParams(window.location.search);
    const tabSignin = document.getElementById("tab-signin");
    const tabSignup = document.getElementById("tab-signup");

    const title = document.getElementById("authTitle");
    const subtitle = document.getElementById("authSubtitle");
    const submitBtn = document.getElementById("submitBtn");
    const confirmWrap = document.getElementById("confirmWrap");
    const authFoot = document.getElementById("authFoot");

    function setMode(mode){
      const isSignup = mode === "signup";

      tabSignin.setAttribute("aria-selected", String(!isSignup));
      tabSignup.setAttribute("aria-selected", String(isSignup));

      if (isSignup){
        document.title = "Sign up | ElevateU";
        title.textContent = "Create your account";
        subtitle.textContent = "Sign up using email/password or a provider.";
        submitBtn.textContent = "Create account";
        confirmWrap.style.display = "";
        authFoot.textContent = "Already have an account? Use Sign in.";
      } else {
        document.title = "Sign in | ElevateU";
        title.textContent = "Welcome back";
        subtitle.textContent = "Sign in using email/password or a provider.";
        submitBtn.textContent = "Sign in";
        confirmWrap.style.display = "none";
        authFoot.textContent = "New here? Use Sign up.";
      }

      // keep URL in sync
      const url = new URL(window.location.href);
      url.searchParams.set("mode", mode);
      url.hash = mode;
      window.history.replaceState({}, "", url.toString());
    }

    // initial mode
    const initialMode = (params.get("mode") || "signin").toLowerCase();
    setMode(initialMode === "signup" ? "signup" : "signin");

    tabSignin.addEventListener("click", () => setMode("signin"));
    tabSignup.addEventListener("click", () => setMode("signup"));

    // password toggle (both eyes)
    document.querySelectorAll(".auth-eye").forEach(btn => {
      btn.addEventListener("click", () => {
        const input = btn.parentElement.querySelector("input");
        if (!input) return;
        input.type = (input.type === "password") ? "text" : "password";
      });
    });

    // provider buttons (these require real OAuth backend)
    document.querySelectorAll("[data-provider]").forEach(btn => {
      btn.addEventListener("click", () => {
        const provider = btn.getAttribute("data-provider");
        alert(
          "Provider sign-in (" + provider + ") needs backend OAuth setup.\n\n" +
          "For now this button is just a placeholder."
        );
      });
    });

    // basic form submit (placeholder)
    document.getElementById("authForm").addEventListener("submit", (e) => {
      e.preventDefault();

      const mode = (new URLSearchParams(window.location.search).get("mode") || "signin").toLowerCase();
      const email = document.getElementById("email").value.trim();
      const pass = document.getElementById("password").value;

      if (!email || !pass) {
        alert("Please enter email + password.");
        return;
      }

      if (mode === "signup") {
        const confirm = document.getElementById("confirm").value;
        if (confirm !== pass) {
          alert("Passwords do not match.");
          return;
        }
        if (!document.getElementById("terms").checked) {
          alert("Please agree to the Terms and Privacy Policy.");
          return;
        }
        alert("Signup placeholder: you would create the account on your backend here.");
      } else {
        alert("Signin placeholder: you would authenticate on your backend here.");
      }
    });
  </script>
</body>
</html>
